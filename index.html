<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Study Spot</title>
  </head>
  <body>
    <!-- header w/ logo & name -->
    <div class="header">
      <img
        src="/src/images/logo.png"
        height="90px"
        width="90px"
        alt="Logo of a floating study material"
      />
      <h1>The Study Spot</h1>
    </div>
    <style>
      .header {
        display: flex;
        align-items: center;
        justify-content: center; /* Center items horizontally (optional) */
        height: 70px;
        margin-bottom: 5px;
      }
      .header img {
        margin-right: 5px;
      }
      body {
        font-family: "Arial", sans-serif; /* Modern font */
        background-color: #bae8e8; /* Light background */
        height: 100vh; /* Full height */
        color: #2d334a;
      }

      #topicForm {
        background: #fffffe; /* White background for the form */
        color: #2d334a;
        padding: 5px;
        border-radius: 10px; /* Rounded corners */
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        width: 100%;
        margin-bottom: 10px;
      }

      fieldset {
        border: none; /* Remove default border */
        display: flex; /* Use flexbox for horizontal alignment */
        align-items: center; /* Center items vertically */
        margin: 10px 0;
      }

      legend {
        font-size: 1.2em; /* Larger font size for the legend */
        margin-bottom: 15px; /* Space below the legend */
      }

      label {
        font-weight: bold; /* Bold labels */
        margin-top: 10px; /* Space above the labels */
      }

      input[type="text"] {
        width: 20%; /* Full width inputs */
        padding: 10px; /* Padding inside inputs */
        border: 1px solid #ccc; /* Light border */
        border-radius: 5px; /* Slightly rounded corners */
        transition: border-color 0.3s; /* Smooth transition */
        margin-right: 5px;
      }

      input[type="text"]:focus {
        border-color: #007bff; /* Change border color on focus */
        outline: none; /* Remove default outline */
      }

      button {
        background-color: #ffd803; /* Primary button color */
        color: #272343; /* Text color */
        font-weight: bold;
        border: none; /* Remove default border */
        padding: 10px; /* Button padding */
        margin-right: 5px;
        border-radius: 5px; /* Rounded corners */
        cursor: pointer; /* Pointer cursor on hover */
        transition: background-color 0.3s; /* Smooth transition */
        width: 8%;
      }

      button:hover {
        background-color: #e5c202; /* Darker shade on hover */
      }

      /* #resetButton {
        background-color: #e3f6f5; 
      }

      #resetButton:hover {
        background-color: #bae8e8;
      } */
    </style>
    <!-- search bar -->
    <form id="topicForm">
      <fieldset id="searchBar">
        <legend>Filter the Study Topics</legend>
        <input
          class="form-group"
          type="text"
          id="name"
          name="name"
          placeholder="Name"
        />
        <input
          class="form-group"
          type="text"
          id="description"
          name="description"
          placeholder="Description"
        />
        <button type="submit">Submit</button>
        <button type="button" id="resetButton">Reset</button>
      </fieldset>
    </form>
    <script>
      // Function to fetch and display JSON data
      var topics = [];
      async function fetchTopics() {
        try {
          const response = await fetch("src/data/topics.json");
          topics = await response.json();
          displayTopics(topics);
        } catch (error) {
          console.error("Error fetching JSON:", error);
        }
      }

      var nameFilter = "";
      var descriptionFilter = "";
      document
        .getElementById("topicForm")
        .addEventListener("submit", handleSubmit);
      document
        .getElementById("resetButton")
        .addEventListener("click", handleReset);

      function handleSubmit(event) {
        event.preventDefault(); // Prevent the default form submission
        const name = document.getElementById("name").value;
        const description = document.getElementById("description").value;

        // Your logic to handle the submitted data
        console.log("Submitted Name:", name);
        console.log("Submitted Description:", description);
        nameFilter = name;
        descriptionFilter = description;
        displayTopics(topics);
      }

      function handleReset() {
        document.getElementById("topicForm").reset(); // Reset the form fields
        nameFilter = "";
        descriptionFilter = "";
        displayTopics(topics);
      }
    </script>

    <!-- list of topics -->
    <script>
      // Function to display topics in the HTML
      function displayTopics(topics) {
        const topicsDiv = document.getElementById("topics");
        topicsDiv.innerHTML = ""; // Clear previous topics

        // filter to list of topics
        var topicList = [];
        const lenOfSearchInputs = nameFilter.length + descriptionFilter.length;
        if (lenOfSearchInputs === 0) {
          topicList = [...topics];
        } else {
          let filteredTopics = [];

          if (nameFilter.length > 0) {
            filteredTopics = filteredTopics.concat(
              topics.filter((topic) =>
                topic.name.toLowerCase().includes(nameFilter.toLowerCase())
              )
            );
          }
          if (descriptionFilter.length > 0) {
            filteredTopics = filteredTopics.concat(
              topics.filter((topic) =>
                topic.description
                  .toLowerCase()
                  .includes(descriptionFilter.toLowerCase())
              )
            );
          }

          // Remove duplicates, if needed (assuming topics has unique entries)
          topicList = [...new Set(filteredTopics.map((topic) => topic.id))].map(
            (id) => filteredTopics.find((topic) => topic.id === id)
          );
        }

        console.log(topicList);
        topicList.forEach((topic) => {
          const topicDiv = document.createElement("div");
          topicDiv.classList.add("topic");
          topicDiv.innerHTML = `<strong>${topic.name}</strong><p>${topic.description}</p>`;
          topicsDiv.appendChild(topicDiv);
        });
      }

      // Fetch topics when the page loads
      window.onload = fetchTopics;
    </script>
    <style>
      #topics {
        display: flex;
        flex-wrap: wrap;
      }

      .topic {
        background-color: #fffffe;
        box-sizing: border-box;
        padding: 10px;
        margin: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        flex: 0 1 calc(25% - 10px);
      }

      @media (max-width: 768px) {
        .topic {
          flex: 0 1 calc(50% - 10px);
        }
      }

      @media (max-width: 480px) {
        .topic {
          flex: 0 1 100%;
        }
      }
    </style>
    <div id="topics"></div>
  </body>
</html>
